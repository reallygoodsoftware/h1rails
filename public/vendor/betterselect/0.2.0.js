/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /gh/reallygoodsoftware/better-select@0.2.0/betterselect.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
class BetterSelect extends HTMLElement{constructor(){super(),this.currentHighlightIndex=-1,this.selectedValues=new Map,this.templates={},this.isKeyboardNavigation=!1,this.searchDebounceTimeout=null,this.isLoading=!1,this.currentOptions=[]}async fetchItems(e){if(!e)return null;const t=this.querySelector("select"),n=t.dataset.url;if(!n)return null;const r=n.replace("{query}",encodeURIComponent(e));try{this.isLoading=!0;const e=await fetch(r),n=await e.json(),i=t.dataset.items;return i?i.split(".").reduce(((e,t)=>e[t]),n):n}catch(e){return console.error("Error fetching items:",e),null}finally{this.isLoading=!1}}initializeDropdown(){const e=this.querySelector("select");if(!e)return;const t=e.hasAttribute("multiple"),n=e.hasAttribute("data-url"),r=document.createElement("input");r.type="hidden",r.name=e.name,r.value=t?Array.from(e.selectedOptions).map((e=>e.value)).join(","):e.value;this.querySelectorAll("template").forEach((e=>{const t=e.dataset.for||"item";this.templates[t]=e}));const i=Array.from(e.options),a=document.createElement("div");a.className="ui-betterselect";const o=document.createElement("div");o.className="--tags";const s=document.createElement("div");s.className="--dropdown --closed";const c=document.createElement("input");c.className=`--input ${e.className}`,c.type="text",c.placeholder="Type to search...";const l=document.createElement("div");l.className="--option-list",l.setAttribute("role","listbox"),l.addEventListener("mouseenter",(()=>{if(this.isKeyboardNavigation){this.isKeyboardNavigation=!1;Array.from(l.children).forEach((e=>e.classList.remove("--highlighted"))),this.currentHighlightIndex=-1}})),e.style.display="none";const d=(e,t,n)=>{const r=e.getAttribute(t);if(!r.startsWith("item"))return;let i;if("item"===r&&"string"==typeof n)i=n;else if(r.startsWith("item.")){i=r.slice(5).split(".").reduce(((e,t)=>e?.[t]),n)}if(void 0!==i)switch(t){case"data-text":e.textContent=i;break;case"data-src":e.src=i;break;case"data-href":e.href=i}},u=(e,n)=>{const r=this.templates.item;if(!r){if(t){const t=document.createElement("div");t.className="--checkbox "+(this.selectedValues.has(e.value)?"--checked":"");const n=document.createElement("span");n.textContent=e.text;const r=document.createDocumentFragment();return r.appendChild(t),r.appendChild(n),r}{const t=document.createElement("span");return t.textContent=e.text,t}}const i=r.content.cloneNode(!0),a=i.querySelectorAll("[data-text], [data-src], [data-href]");if(t){const t=i.querySelector("[data-checkbox]");if(t){const n=document.createElement("div");n.className="--checkbox "+(this.selectedValues.has(e.value)?"--checked":""),t.replaceWith(n)}}return a.forEach((e=>{e.hasAttribute("data-text")&&d(e,"data-text",n),e.hasAttribute("data-src")&&d(e,"data-src",n),e.hasAttribute("data-href")&&d(e,"data-href",n)})),i},h=(e,t)=>{const n=this.templates.pill;if(!n){const t=document.createElement("span");return t.textContent=e.text,t}const r=n.content.cloneNode(!0);return r.querySelectorAll("[data-text], [data-src], [data-href]").forEach((e=>{e.hasAttribute("data-text")&&d(e,"data-text",t),e.hasAttribute("data-src")&&d(e,"data-src",t),e.hasAttribute("data-href")&&d(e,"data-href",t)})),r},b=()=>{t&&(o.innerHTML="",this.selectedValues.forEach(((e,t)=>{const n=document.createElement("div");n.className="--tag";const r=h(e,JSON.parse(e.dataset?.item||"{}"));n.appendChild(r);const i=document.createElement("button");i.className="--remove",i.dataset.value=t,i.setAttribute("aria-label","Remove"),n.appendChild(i),o.appendChild(n)})))},p=n=>{const i=this.currentOptions.find((e=>e.value===n));if(!i)return;t?(this.selectedValues.has(n)?this.selectedValues.delete(n):this.selectedValues.set(n,i),c.value=""):(this.selectedValues.clear(),this.selectedValues.set(n,i),c.value=i.text,k()),Array.from(e.options).forEach((e=>{e.selected=this.selectedValues.has(e.value)})),r.value=t?Array.from(this.selectedValues.keys()).join(","):n,b(),t?x(""):v();const a=new Event("change");e.dispatchEvent(a)},g=()=>{const e=Array.from(l.children)[this.currentHighlightIndex];e&&p(e.dataset.value)},m=e=>{this.isKeyboardNavigation=!0;const t=Array.from(l.children);t.forEach((e=>e.classList.remove("--highlighted"))),this.currentHighlightIndex=e,t[this.currentHighlightIndex]&&(t[this.currentHighlightIndex].classList.add("--highlighted"),t[this.currentHighlightIndex].scrollIntoView({block:"nearest"}))},v=()=>{l.innerHTML="",this.currentOptions.forEach((e=>{const t=document.createElement("button");t.className="--item",t.setAttribute("role","option"),this.selectedValues.has(e.value)?(t.classList.add("--selected"),t.setAttribute("aria-selected","true")):t.setAttribute("aria-selected","false");const r=n?"string"==typeof e.dataset.item&&"{"===e.dataset.item[0]?JSON.parse(e.dataset.item):e.dataset.item:JSON.parse(e.dataset?.item||"{}");t.appendChild(u(e,r)),t.dataset.value=e.value,t.addEventListener("click",(t=>{t.stopPropagation(),p(e.value),c.focus()})),l.appendChild(t)})),this.currentOptions.length>0?(this.currentHighlightIndex=0,m(0)):this.currentHighlightIndex=-1},x=async(e="")=>{if(l.innerHTML="",n)if(e){const t=document.createElement("div");if(t.className="--loading",t.textContent="Loading...",l.appendChild(t),this.isLoading)return void t.classList.remove("--hidden");t.classList.add("--hidden");const n=await this.fetchItems(e);this.currentOptions=n?n.map((e=>"string"==typeof e||"number"==typeof e?{value:e,text:e,dataset:{item:e}}:{value:e.id||e.value,text:e.name||e.text||e.label,dataset:{item:JSON.stringify(e)}})):[]}else this.currentOptions=[];else this.currentOptions=i.filter((t=>t.text.toLowerCase().includes(e.toLowerCase())));v()},f=()=>{s.classList.remove("--closed"),s.classList.add("--open"),x(c.value)},k=()=>{s.classList.remove("--open"),s.classList.add("--closed"),this.currentHighlightIndex=-1,this.isKeyboardNavigation=!1};o.addEventListener("click",(e=>{if(e.target.classList.contains("--remove")){const t=e.target.dataset.value;p(t)}})),a.addEventListener("click",(e=>{e.stopPropagation()})),c.addEventListener("click",(e=>{e.stopPropagation(),f()})),c.addEventListener("keydown",(e=>{const n=Array.from(l.children);switch(e.key){case"ArrowDown":e.preventDefault(),s.classList.contains("--closed")&&f(),m(Math.min(this.currentHighlightIndex+1,n.length-1));break;case"ArrowUp":e.preventDefault(),s.classList.contains("--closed")&&f(),m(Math.max(this.currentHighlightIndex-1,0));break;case"Enter":e.preventDefault(),n.length>0&&(g(),t||x(""));break;case"Escape":k()}})),c.addEventListener("input",(()=>{f(),n?(this.searchDebounceTimeout&&clearTimeout(this.searchDebounceTimeout),this.searchDebounceTimeout=setTimeout((()=>{x(c.value)}),200)):x(c.value)})),document.addEventListener("click",(()=>{k()})),i.forEach((e=>{e.selected&&this.selectedValues.set(e.value,e)})),b(),x(),s.appendChild(c),s.appendChild(l),a.appendChild(o),a.appendChild(s),a.appendChild(r),this.appendChild(a)}connectedCallback(){this.isConnected&&requestAnimationFrame((()=>this.initializeDropdown()))}}customElements.define("better-select",BetterSelect);const style=document.createElement("style");style.textContent="\n:root {\n\n  --ui-betterselect-container-gap: 10px;\n  --ui-betterselect-gray-200: rgb(229 231 235);\n  --ui-betterselect-gray-300: rgb(209 213 219);\n  --ui-betterselect-gray-400: rgb(160 160 160);\n  --ui-betterselect-gray-800: rgb(17 24 39);\n\n  --ui-betterselect-tag-border-radius: 8px;\n  --ui-betterselect-tag-border: 1px solid var(--ui-betterselect-gray-200);\n  --ui-betterselect-tag-padding: 0 2px 0 6px;\n  --ui-betterselect-tag-height: 26px;\n  --ui-betterselect-tag-font-size: 12px;\n\n  --ui-betterselect-input-height: 50px;\n  --ui-betterselect-input-border-width: 2px; \n  --ui-betterselect-input-border-radius: 8px;\n  --ui-betterselect-input-border-color: var(--ui-betterselect-gray-200);\n  --ui-betterselect-input-border-color-focus: var(--ui-betterselect-gray-800);\n  --ui-betterselect-input-padding: 6px 10px;\n  --ui-betterselect-input-padding-desktop: var(--ui-input-padding);\n\n  --ui-betterselect-option-background-color-highlighted: var(--ui-betterselect-gray-200);\n  --ui-betterselect-option-outline-highlighted: var(--ui-betterselect-input-border-width) solid var(--ui-betterselect-gray-800);\n  --ui-betterselect-option-background-color-selected: var(--ui-betterselect-gray-200);\n\n  --ui-betterselect-checkbox-size: 16px;\n  --ui-betterselect-checkbox-border-width: 2px;\n  --ui-betterselect-checkbox-border-radius: 3px;\n  --ui-betterselect-checkbox-background-color: white;\n  --ui-betterselect-checkbox-border-color: var(--ui-betterselect-gray-300);\n  --ui-betterselect-checkbox-checked-background: var(--h1-dropdown-checkbox-checked-background, #3b82f6);\n  --ui-betterselect-checkbox-checked-border: var(--h1-dropdown-checkbox-checked-border, #3b82f6);\n\n}\n\n.ui-betterselect {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  gap: var(--ui-betterselect-container-gap);\n  .--tags {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 4px;\n    font-size: var(--ui-betterselect-tag-font-size);\n    .--tag {\n      display: flex;\n      align-items: center;\n      line-height: 1.5;\n      gap: 4px;\n      height: var(--ui-betterselect-tag-height);\n      background-color: var(--ui-betterselect-tag-background-color);\n      border-radius: var(--ui-betterselect-tag-border-radius);\n      border: var(--ui-betterselect-tag-border);\n      padding: var(--ui-betterselect-tag-padding); \n    }\n    .--remove {\n      width: 16px;\n      height: 16px;\n      padding: 0;\n      border: none;\n      border-radius: 50%;\n      background-color: none;\n      cursor: pointer;\n      background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='18' y1='6' x2='6' y2='18'%3E%3C/line%3E%3Cline x1='6' y1='6' x2='18' y2='18'%3E%3C/line%3E%3C/svg%3E\");\n      background-size: 10px;\n      background-position: center;\n      background-repeat: no-repeat;\n      transition: background-color 0.2s;\n      &:hover {\n        background-color: #d1d5db;\n      }\n    }\n  }\n  .--dropdown {\n    .--input {\n      line-height: 1.5;\n      height: var(--ui-betterselect-input-height);\n      border-width: var(--ui-betterselect-input-border-width);\n      border-radius: var(--ui-betterselect-input-border-radius);\n      border-color: var(--ui-betterselect-input-border-color);\n      padding: var(--ui-betterselect-input-padding);\n      padding-right: 40px;\n      width: 100%;\n      outline: none;\n      background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='rgb(160 160 160)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M8 9l4-4 4 4'/%3E%3Cpath d='M16 15l-4 4-4-4'/%3E%3C/svg%3E\");\n      background-repeat: no-repeat;\n      background-position: right 10px center;\n      background-size: 20px;\n      &:focus {\n        border-color: var(--ui-betterselect-input-border-color-focus);\n      }\n    }\n    .--option-list {\n      z-index: 100;\n      position: absolute; \n      top: calc(100% - var(--ui-betterselect-input-border-width));\n      right: 0;\n      left: 0;\n      font-weight: normal;\n      opacity: 0;\n      text-align: left;\n      transform: scale(0.95);\n      transition: opacity 0.1s ease-out, transform 0.1s ease-out;\n      transform-origin: top left;\n      pointer-events: none;\n      max-height: 300px;\n      overflow-y: auto;\n      border-style: solid;\n      background-color: white;  \n      border-color: var(--ui-betterselect-input-border-color-focus);\n      border-width: var(--ui-betterselect-input-border-width);\n      border-radius: var(--ui-betterselect-input-border-radius);\n      border-top-width: 0;\n      border-top-left-radius: 0;\n      border-top-right-radius: 0;\n      padding-top: 2px;\n      .--item {\n        align-items: center;\n        text-align: left;\n        display: flex;\n        gap: 8px;\n        line-height: 1.5;\n        border: none;\n      }\n      .--loading {\n        color: var(--ui-betterselect-gray-400);\n        text-align: center;\n      }\n      .--checkbox {\n        width: 16px;\n        height: 16px;\n        border-style: solid;\n        background-color: var(--ui-betterselect-checkbox-background-color);\n        border-color: var(--ui-betterselect-checkbox-border-color);\n        border-width: var(--ui-betterselect-checkbox-border-width);\n        border-radius: var(--ui-betterselect-checkbox-border-radius);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        flex-shrink: 0;\n        &.--checked {\n          background: var(--ui-betterselect-checkbox-checked-background);\n          border-color: var(--ui-betterselect-checkbox-checked-border);\n          &::after {\n            content: '✓';\n            color: white;\n            font-size: 12px;\n          }\n        }\n      }\n    }\n    &.--open {\n      .--input {\n        border-bottom-left-radius: 0;\n        border-bottom-right-radius: 0;\n        border-color: var(--ui-betterselect-input-border-color-focus);\n        border-bottom-color: transparent;\n      }\n      .--option-list {\n        opacity: 1;\n        transform: scale(1);\n        pointer-events: auto;\n        & > * {\n          width: 100%;\n          padding: var(--ui-betterselect-input-padding);\n          &:hover,\n          &.--highlighted {\n            outline: var(--ui-betterselect-option-outline-highlighted);\n            background-color: var(--ui-betterselect-option-background-color-highlighted);\n            color: var(--ui-betterselect-option-text-color-highlighted);\n          }\n          &.--selected {\n            background-color: var(--ui-betterselect-option-background-color-selected);\n            color: var(--ui-betterselect-option-text-color-selected);\n          }\n        }\n      }\n    }\n  }\n} \n",document.head.appendChild(style);
//# sourceMappingURL=/sm/64fbdaa48a3128255304daaa5ad78510fb128d0aea081309c1ee228ba86d3465.map